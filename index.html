<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Mass & Balance Dornier 228</title>

  <!-- CSS externo -->
  <link rel="stylesheet" href="design.css">

  <!-- Feather Icons -->
  <script src="https://unpkg.com/feather-icons" defer></script>
  <!-- JavaScript modular -->
  <script src="app.js" type="module" defer></script>

  <!-- PWA Metadata -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0d0d0d">
  <link rel="apple-touch-icon" href="icone.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="D228">
</head>

<body>
  <nav class="settings">
    <a href="settings.html" aria-label="Configurações"><i data-feather="settings"></i></a>
  </nav>
  
  <hr class="separator">  
  
  <main>    
    <!-- Mass & Balance -->
    <section class="mb-section">
      <div class="mb-header">        
        <h2>M&amp;B</h2>
        <select id="aviaoSelecionado" class="select-plane"></select>
      </div>
      <table class="mb-table">
        <thead>
          <tr>
            <th scope="col">Item</th>
            <th scope="col">Peso (kg)</th>
            <th scope="col">Momento (kg·m)</th>
            <th scope="col">Comentário</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Basic weight</td>
            <td id="basicWeight">0</td>
            <td id="basicMoment">0</td>
            <td></td>
          </tr>
          <tr>
            <td><label for="pilots">Pilotos</label></td>
            <td><input id="pilots" type="number" step="any" value="150"></td>
            <td id="momentPilots">0</td>
            <td>ARM fixo = 4.21</td>
          </tr>
          <tr>
            <td><label for="manualPayload">Payload</label></td>
            <td><input id="manualPayload" type="number" step="any" value="0"></td>
            <td id="momentPayload">0</td>
            <td>ARM = 8.7 <span id="maxFuelNote" class="highlight"></span></td>
          </tr>
          <tr class="gray-row">
            <td>ZFW</td>
            <td id="zfw">0</td>
            <td id="momentZfw">0</td>
            <td></td>
          </tr>
          <tr>
            <td><label for="fuel">Fuel loading</label></td>
            <td><input id="fuel" type="number" step="any" value="0"></td>
            <td id="momentFuel">0</td>
            <td>ARM = 7.936 <span id="maxPayloadNote" class="highlight"></span></td>
          </tr>
          <tr id="rampRow" class="gray-row">
            <td>Ramp Weight</td>
            <td id="rampWeight" class="limit-check">0</td>
            <td id="momentRamp">0</td>
            <td></td>
          </tr>
          <tr>
            <td><label for="fuelTaxi">Fuel taxi</label></td>
            <td><input id="fuelTaxi" type="number" step="any" value="30"></td>
            <td id="momentTaxi">0</td>
            <td>ARM = 7.936</td>
          </tr>
          <tr id="takeoffRow" class="gray-row">
            <td>Take-off Weight</td>
            <td id="takeoffWeight" class="limit-check">0</td>
            <td id="momentTakeoff">0</td>
            <td>MAC: <span id="macTakeoff">0</span>%</td>
          </tr>
          <tr>
            <td><label for="fuelDest">Fuel to destination</label></td>
            <td><input id="fuelDest" type="number" step="any" value="0"></td>
            <td id="momentDest">0</td>
            <td>ARM = 7.936</td>
          </tr>
          <tr id="landingRow" class="gray-row">
            <td>Landing Weight</td>
            <td id="landingWeight" class="limit-check">0</td>
            <td id="momentLanding">0</td>
            <td>MAC: <span id="macLanding">0</span>%</td>
          </tr>
        </tbody>
      </table>
    </section>

    <hr class="separator">

    <!-- Rotas -->
    <section class="routes-section">
      <div class="routes-header">
        <h2>Rotas</h2>
        <div class="route-buttons">
          <button id="btnAddLeg" aria-label="Adicionar perna">+</button>
          <button id="btnRemoveLeg" aria-label="Remover perna">−</button>
        </div>
      </div>
      <label for="dropdownRotas" class="visually-hidden">Selecionar rota</label>
      <select id="dropdownRotas" class="route-select">
        <option value="">-- Selecionar rota --</option>
      </select>
      <table class="route-table">
        <caption>Detalhes das pernas de rota</caption>
        <thead>
          <tr>
            <th scope="col">Leg</th>
            <th scope="col">Depf (lb)</th>
            <th scope="col">Payl (kg)</th>
            <th scope="col">Tripf (lb)</th>
            <th scope="col">Info</th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody id="legsTable"></tbody>
      </table>
    </section>

    <hr class="separator">

    <!-- Conversor Kg ↔ Lb -->
    <section class="converter-section">
      <h2>Conversor kg ↔ lb</h2>
      <table class="converter-table">
        <tbody>
          <tr>
            <td>Kg para lb</td>
            <td><input id="kg" type="number" step="any" value="0"></td>
            <td id="toLb">0</td>
          </tr>
          <tr>
            <td>Lb para kg</td>
            <td><input id="lb" type="number" step="any" value="0"></td>
            <td id="toKg">0</td>
          </tr>
        </tbody>
      </table>
    </section>
  </main>

  <hr class="separator">

  <!-- Service Worker -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js')
          .then(() => console.log('SW registado'))
          .catch(err => console.error('Erro ao registar SW:', err));
      });
    }
  </script>
</body>
</html>
